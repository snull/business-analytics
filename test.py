import streamlit as st
import folium
from streamlit_folium import st_folium
from shapely.geometry import Polygon

colors = [
    "red", "blue", "green", "yellow", "orange", "purple", "pink", "brown",
    "gray", "black", "white", "cyan", "magenta", "lime", "teal", "navy",
    "olive", "maroon"
]


def test():
    districts = {"منطقه 10": [[35.67087, 51.352236], [35.668743, 51.358244], [35.667732, 51.36348], [35.667, 51.368759],
                              [35.668743, 51.376312], [35.67094, 51.381419], [35.677807, 51.380603],
                              [35.683768, 51.379659],
                              [35.700673, 51.377943], [35.700162, 51.354965], [35.698925, 51.355137],
                              [35.696851, 51.355137],
                              [35.695614, 51.355523], [35.694098, 51.35621], [35.692198, 51.356124],
                              [35.688382, 51.354858],
                              [35.686499, 51.354858], [35.683885, 51.354021], [35.676024, 51.354836],
                              [35.67087, 51.352236]],
                 "منطقه 11": [[35.659713, 51.382105], [35.659748, 51.383479], [35.659469, 51.385581],
                              [35.66177, 51.388457],
                              [35.662014, 51.389744], [35.661735, 51.391203], [35.660794, 51.393263],
                              [35.659748, 51.39365],
                              [35.658597, 51.404808], [35.676308, 51.408026], [35.701519, 51.412911],
                              [35.700685, 51.377989],
                              [35.668475, 51.381497], [35.659713, 51.382105]],
                 "منطقه 12": [[35.658642, 51.404843], [35.658224, 51.40965], [35.659061, 51.41686],
                              [35.659897, 51.433425],
                              [35.660037, 51.437716], [35.660944, 51.44527], [35.683186, 51.446815],
                              [35.702077, 51.448016],
                              [35.70138, 51.412911], [35.658642, 51.404843]],
                 "منطقه 13": [[35.689739, 51.447415], [35.691761, 51.475739], [35.693155, 51.49488],
                              [35.702147, 51.502089],
                              [35.702704, 51.50578], [35.704307, 51.508183], [35.707374, 51.512561],
                              [35.713019, 51.510758],
                              [35.719639, 51.51299], [35.721312, 51.515651], [35.722218, 51.520371],
                              [35.722009, 51.524835],
                              [35.722009, 51.531358], [35.723193, 51.536593], [35.722706, 51.542602],
                              [35.722218, 51.547408],
                              [35.723193, 51.550841], [35.724239, 51.552815], [35.724726, 51.556506],
                              [35.724657, 51.563287],
                              [35.72396, 51.565518], [35.722566, 51.568694], [35.721939, 51.5729], [35.7218, 51.57702],
                              [35.722162, 51.579437], [35.722162, 51.582656], [35.721918, 51.585531],
                              [35.722496, 51.588264],
                              [35.723611, 51.588092], [35.723751, 51.581483], [35.72396, 51.573329],
                              [35.724786, 51.567156],
                              [35.7259, 51.563036], [35.726249, 51.558402], [35.724855, 51.538403],
                              [35.72388, 51.523597],
                              [35.723636, 51.519134], [35.720814, 51.510079], [35.712207, 51.482613],
                              [35.703844, 51.454418],
                              [35.701892, 51.44798], [35.689739, 51.447415]],
                 "منطقه 14": [[35.691332, 51.47094], [35.689671, 51.447276], [35.665501, 51.44562],
                              [35.665257, 51.447423],
                              [35.664978, 51.449955], [35.660595, 51.456513], [35.659619, 51.460204],
                              [35.658572, 51.461406],
                              [35.659619, 51.46235], [35.660107, 51.464496], [35.6592, 51.468444],
                              [35.655992, 51.488013],
                              [35.668056, 51.492133], [35.68946, 51.492562], [35.692876, 51.494279],
                              [35.691332, 51.47094]],
                 "منطقه 15": [[35.656017, 51.488106], [35.65912, 51.468666], [35.660201, 51.464417],
                              [35.659608, 51.462314],
                              [35.658572, 51.461492], [35.659549, 51.460118], [35.660386, 51.456599],
                              [35.664918, 51.44999],
                              [35.665337, 51.445699], [35.660944, 51.445441], [35.659967, 51.43806],
                              [35.659828, 51.430678],
                              [35.651389, 51.433253], [35.624533, 51.436687], [35.625105, 51.45391],
                              [35.624721, 51.457944],
                              [35.624617, 51.458759], [35.623556, 51.460977], [35.617975, 51.472821],
                              [35.612811, 51.477456],
                              [35.614277, 51.480031], [35.613718, 51.482348], [35.609671, 51.489472],
                              [35.607508, 51.495481],
                              [35.60695, 51.495223], [35.604647, 51.498828], [35.605275, 51.499515],
                              [35.602832, 51.502862],
                              [35.605415, 51.506467], [35.614416, 51.498141], [35.615812, 51.501317],
                              [35.62071, 51.496482],
                              [35.621233, 51.49734], [35.621721, 51.499486], [35.621442, 51.500645],
                              [35.621652, 51.50176],
                              [35.623152, 51.502962], [35.62364, 51.502748], [35.624024, 51.502705],
                              [35.624861, 51.502318],
                              [35.625942, 51.502061], [35.627931, 51.501546], [35.629431, 51.501203],
                              [35.629884, 51.504507],
                              [35.631593, 51.504078], [35.633512, 51.50322], [35.633791, 51.507297],
                              [35.635465, 51.506953],
                              [35.635639, 51.509957], [35.637314, 51.509871], [35.637069, 51.507897],
                              [35.637802, 51.507683],
                              [35.636975, 51.501968], [35.639382, 51.501496], [35.644613, 51.50244],
                              [35.645112, 51.498656],
                              [35.646556, 51.49704], [35.660107, 51.501832], [35.663036, 51.490588],
                              [35.656017, 51.488106]],
                 "منطقه 16": [[35.651525, 51.433268], [35.659702, 51.430671], [35.65904, 51.41829],
                              [35.658499, 51.412282],
                              [35.658151, 51.408055], [35.659005, 51.400652], [35.65972, 51.393657],
                              [35.657227, 51.392927],
                              [35.658168, 51.390352], [35.657767, 51.388872], [35.657819, 51.387606],
                              [35.65761, 51.386662],
                              [35.657523, 51.383078], [35.656982, 51.382434], [35.654925, 51.381855],
                              [35.652693, 51.384172],
                              [35.648927, 51.389666], [35.644463, 51.392927], [35.641115, 51.391554],
                              [35.63972, 51.391039],
                              [35.636965, 51.39327], [35.630215, 51.397862], [35.620326, 51.404901],
                              [35.61443, 51.403356],
                              [35.614605, 51.410565], [35.615581, 51.415758], [35.61771, 51.420393],
                              [35.620117, 51.423097],
                              [35.623117, 51.427217], [35.625175, 51.430521], [35.626396, 51.433396],
                              [35.627407, 51.436186],
                              [35.651525, 51.433268]],
                 "منطقه 17": [[35.666641, 51.344261], [35.664061, 51.34366], [35.637906, 51.354303],
                              [35.636511, 51.356535],
                              [35.637558, 51.358166], [35.638639, 51.360054], [35.641185, 51.365161],
                              [35.645335, 51.369667],
                              [35.650392, 51.371684], [35.652624, 51.37383], [35.654088, 51.377134],
                              [35.654576, 51.380825],
                              [35.655169, 51.38164], [35.657645, 51.383057], [35.65754, 51.386619],
                              [35.657994, 51.387606],
                              [35.657819, 51.389022], [35.658307, 51.390224], [35.657296, 51.392841],
                              [35.659702, 51.393485],
                              [35.660748, 51.393185], [35.661725, 51.391253], [35.662143, 51.389794],
                              [35.661759, 51.388464],
                              [35.659423, 51.385546], [35.659702, 51.3834], [35.659737, 51.382241],
                              [35.670859, 51.381254],
                              [35.668628, 51.376019], [35.666955, 51.369066], [35.668698, 51.358166],
                              [35.670894, 51.352201],
                              [35.666641, 51.344261]],
                 "منطقه 18": [[35.664305, 51.343575], [35.66678, 51.344175], [35.666432, 51.341515],
                              [35.672114, 51.309028],
                              [35.67574, 51.309285], [35.676507, 51.279588], [35.672289, 51.281176],
                              [35.671347, 51.281219],
                              [35.67058, 51.281047], [35.669186, 51.281862], [35.667722, 51.283064],
                              [35.661794, 51.284866],
                              [35.661725, 51.290102], [35.659528, 51.290016], [35.659214, 51.294093],
                              [35.66162, 51.293921],
                              [35.66148, 51.295724], [35.661794, 51.299887], [35.661062, 51.300488],
                              [35.659423, 51.300316],
                              [35.658063, 51.300659], [35.655692, 51.301088], [35.655518, 51.300015],
                              [35.654995, 51.298513],
                              [35.654228, 51.297913], [35.652066, 51.295681], [35.650723, 51.295059],
                              [35.648317, 51.295896],
                              [35.648142, 51.298127], [35.647829, 51.298342], [35.647619, 51.299736],
                              [35.646015, 51.299307],
                              [35.64544, 51.299458], [35.64469, 51.300359], [35.643766, 51.300273],
                              [35.643801, 51.299801],
                              [35.643591, 51.299329], [35.641917, 51.301003], [35.639319, 51.298041],
                              [35.637767, 51.300917],
                              [35.637732, 51.310744], [35.64033, 51.309714], [35.640418, 51.311774],
                              [35.644271, 51.311903],
                              [35.647027, 51.312075], [35.648282, 51.311646], [35.649241, 51.31083],
                              [35.652798, 51.310723],
                              [35.653879, 51.316559], [35.655221, 51.3201], [35.657087, 51.324477],
                              [35.654123, 51.325614],
                              [35.651909, 51.327095], [35.64938, 51.32864], [35.646469, 51.328983],
                              [35.64544, 51.330271],
                              [35.644951, 51.330914], [35.64469, 51.331451], [35.643487, 51.332545],
                              [35.642161, 51.333189],
                              [35.641813, 51.327868], [35.638918, 51.32864], [35.639249, 51.332889],
                              [35.635953, 51.331515],
                              [35.635901, 51.334391], [35.637122, 51.337116], [35.633512, 51.34057],
                              [35.622349, 51.323233],
                              [35.620326, 51.324863], [35.627373, 51.334734], [35.630442, 51.340742],
                              [35.634, 51.347523],
                              [35.636581, 51.353359], [35.637697, 51.354218], [35.664305, 51.343575]],
                 "منطقه 19": [[35.620256, 51.404858], [35.63972, 51.390867], [35.644812, 51.392841],
                              [35.652135, 51.385202],
                              [35.654925, 51.381254], [35.653809, 51.376104], [35.650741, 51.371727],
                              [35.644951, 51.369495],
                              [35.640766, 51.364431], [35.636581, 51.356449], [35.637976, 51.354132],
                              [35.636651, 51.353445],
                              [35.635465, 51.351042], [35.627233, 51.334391], [35.62228, 51.328125],
                              [35.621163, 51.329155],
                              [35.625977, 51.335678], [35.626326, 51.339712], [35.619628, 51.340742],
                              [35.619628, 51.338768],
                              [35.617954, 51.339025], [35.615233, 51.340313], [35.615721, 51.343918],
                              [35.618442, 51.344433],
                              [35.621931, 51.343832], [35.622001, 51.341858], [35.627233, 51.341],
                              [35.627652, 51.34572],
                              [35.629814, 51.345119], [35.631279, 51.34984], [35.628559, 51.351643],
                              [35.627233, 51.351557],
                              [35.623884, 51.352158], [35.623884, 51.354818], [35.625908, 51.354647],
                              [35.625559, 51.357222],
                              [35.626396, 51.359024], [35.627721, 51.358852], [35.628663, 51.360741],
                              [35.628838, 51.362414],
                              [35.625001, 51.365075], [35.624791, 51.364131], [35.621163, 51.364517],
                              [35.621059, 51.366706],
                              [35.623187, 51.367736], [35.626117, 51.365933], [35.627791, 51.369538],
                              [35.625454, 51.371555],
                              [35.626535, 51.373787], [35.628977, 51.37177], [35.629675, 51.373186],
                              [35.625419, 51.376619],
                              [35.625175, 51.378078], [35.627407, 51.383057], [35.624582, 51.383615],
                              [35.624268, 51.386833],
                              [35.621756, 51.387091], [35.619942, 51.390309], [35.614325, 51.390266],
                              [35.6145, 51.403313],
                              [35.620256, 51.404858]],
                 "منطقه 20": [[35.62465, 51.45884], [35.62507, 51.45369], [35.62444, 51.43678], [35.62737, 51.4361],
                              [35.62618, 51.43275], [35.62248, 51.42597], [35.61767, 51.42039], [35.61544, 51.41575],
                              [35.61446, 51.41009], [35.61446, 51.40331], [35.61272, 51.40228], [35.61202, 51.40743],
                              [35.60888, 51.40691], [35.60567, 51.40571], [35.60399, 51.40803], [35.60337, 51.41215],
                              [35.60016, 51.41618], [35.59799, 51.41541], [35.59687, 51.41893], [35.59443, 51.41773],
                              [35.59297, 51.41661], [35.59017, 51.41721], [35.58857, 51.41687], [35.58375, 51.41696],
                              [35.58194, 51.41344], [35.58012, 51.4112], [35.57524, 51.41738], [35.57335, 51.41618],
                              [35.57189, 51.42005], [35.56176, 51.42348], [35.56323, 51.42794], [35.57356, 51.42477],
                              [35.576986, 51.425114], [35.57943, 51.424599], [35.58082, 51.42339], [35.58264, 51.42245],
                              [35.58368, 51.42185], [35.5834, 51.42468], [35.58145, 51.42622], [35.58166, 51.42708],
                              [35.5825, 51.42846], [35.58257, 51.43069], [35.58166, 51.43292], [35.58012, 51.43704],
                              [35.58229, 51.43833], [35.58124, 51.44185], [35.58047, 51.44511], [35.5825, 51.44768],
                              [35.58473, 51.44914], [35.58696, 51.45163], [35.58424, 51.45197], [35.58299, 51.45103],
                              [35.58173, 51.4482], [35.58033, 51.44708], [35.57712, 51.45172], [35.57852, 51.45429],
                              [35.5811, 51.45524], [35.57922, 51.45601], [35.57775, 51.45747], [35.57642, 51.45858],
                              [35.57559, 51.45987], [35.57391, 51.46056], [35.57216, 51.46425], [35.55862, 51.46983],
                              [35.56127, 51.47927], [35.56253, 51.47721], [35.56469, 51.47549], [35.56693, 51.47352],
                              [35.57007, 51.47232], [35.57244, 51.4712], [35.5758, 51.47026], [35.57901, 51.47077],
                              [35.58236, 51.46863], [35.58403, 51.46631], [35.58592, 51.46313], [35.58948, 51.46004],
                              [35.59248, 51.45815], [35.59625, 51.45463], [35.59862, 51.4518], [35.60009, 51.45369],
                              [35.60183, 51.45223], [35.60309, 51.45137], [35.60344, 51.44863], [35.60846, 51.45009],
                              [35.60783, 51.45438], [35.6116, 51.45644], [35.61411, 51.46245], [35.61446, 51.45747],
                              [35.61718, 51.45824], [35.61683, 51.46202], [35.61795, 51.46373], [35.62207, 51.46348],
                              [35.62465, 51.45884]],
                 "منطقه 21": [[35.677309, 51.279545], [35.678912, 51.279373], [35.679958, 51.279116],
                              [35.682817, 51.281948],
                              [35.684978, 51.283236], [35.686302, 51.284351], [35.686512, 51.286154],
                              [35.689509, 51.287355],
                              [35.691182, 51.287184], [35.695365, 51.289587], [35.696619, 51.288729],
                              [35.697944, 51.289673],
                              [35.700802, 51.28933], [35.702753, 51.289759], [35.70352, 51.290274],
                              [35.705402, 51.289759],
                              [35.707841, 51.290274], [35.708329, 51.291046], [35.716274, 51.291304],
                              [35.714322, 51.252508],
                              [35.716274, 51.240406], [35.717876, 51.230879], [35.718155, 51.220837],
                              [35.720943, 51.20719],
                              [35.736411, 51.167364], [35.741427, 51.154575], [35.744074, 51.147022],
                              [35.74484, 51.140413],
                              [35.744562, 51.133118], [35.742681, 51.124535], [35.742054, 51.117411],
                              [35.742541, 51.110029],
                              [35.744283, 51.095695], [35.746025, 51.089516], [35.743099, 51.089172],
                              [35.740312, 51.104536],
                              [35.736202, 51.117239], [35.732439, 51.124191], [35.72812, 51.12711],
                              [35.723033, 51.131659],
                              [35.716274, 51.141701], [35.708329, 51.164274], [35.704286, 51.181355],
                              [35.68937, 51.218348],
                              [35.682189, 51.237831], [35.678843, 51.25946], [35.676891, 51.272678],
                              [35.676751, 51.279373],
                              [35.677309, 51.279545]],
                 "منطقه 22": [[35.730001, 51.281433], [35.739337, 51.268215], [35.743517, 51.265898],
                              [35.749647, 51.267357],
                              [35.755289, 51.268215], [35.756334, 51.268258], [35.776409, 51.268301],
                              [35.779751, 51.263816],
                              [35.78144, 51.262915], [35.780569, 51.26313], [35.780134, 51.263065],
                              [35.779594, 51.263301],
                              [35.779142, 51.263494], [35.778759, 51.264009], [35.777209, 51.264095],
                              [35.77479, 51.263816],
                              [35.774198, 51.26343], [35.773467, 51.263795], [35.773083, 51.263859],
                              [35.772213, 51.263323],
                              [35.771412, 51.263087], [35.770698, 51.262808], [35.770054, 51.262636],
                              [35.768174, 51.262379],
                              [35.767477, 51.255856], [35.768035, 51.246758], [35.768452, 51.237102],
                              [35.768104, 51.230965],
                              [35.767582, 51.223669], [35.767895, 51.216631], [35.76793, 51.210752],
                              [35.768104, 51.205773],
                              [35.768348, 51.201267], [35.768801, 51.197662], [35.773258, 51.182556],
                              [35.771029, 51.148224],
                              [35.7727, 51.115265], [35.774372, 51.091919], [35.746164, 51.089516],
                              [35.744283, 51.094923],
                              [35.742263, 51.117239], [35.742959, 51.12505], [35.744492, 51.131573],
                              [35.745049, 51.140499],
                              [35.744144, 51.147108], [35.743308, 51.149597], [35.729095, 51.186504],
                              [35.720873, 51.207018],
                              [35.718085, 51.220665], [35.717946, 51.230278], [35.714322, 51.252422],
                              [35.715019, 51.265383],
                              [35.715716, 51.281862], [35.716413, 51.291304], [35.730001, 51.281433]]}
    st.title("Multiple Polygons with Different Colors using Folium in Streamlit")

    # Create multiple polygons
    polygon1 = Polygon([
        [37.7749, -122.4194],  # San Francisco
        [34.0522, -118.2437],  # Los Angeles
        [36.1699, -115.1398],  # Las Vegas
        [37.7749, -122.4194]  # Back to San Francisco
    ])
    polygon2 = Polygon([
        [40.7128, -74.0060],  # New York
        [39.9526, -75.1652],  # Philadelphia
        [38.9072, -77.0369],  # Washington, D.C.
        [40.7128, -74.0060]  # Back to New York
    ])
    polygon3 = Polygon([
        [41.8781, -87.6298],  # Chicago
        [42.3314, -83.0458],  # Detroit
        [43.0731, -89.4012],  # Madison
        [41.8781, -87.6298]  # Back to Chicago
    ])
    st.write(polygon3)
    # Create a GeoDataFrame with the polygons and assign colors
    # Create a Folium map
    m = folium.Map(location=[39.8283, -98.5795], zoom_start=4)  # Center of the USA
    # Function to style each polygon with its assigned color
    # Add the polygons to the map with their respective colors
    folium.Polygon(
        locations=polygon1.exterior.coords,
        color='red',
        weight=1,
        fill=True,
        fill_opacity=0.3,
    ).add_to(m)
    if st.button('Extract'):
        for i, district in enumerate(districts):
            if i > 17:
                i -= 17
            folium.Polygon(
                locations=[(lon, lat) for lon, lat in Polygon(districts[district]).exterior.coords],
                color=colors[i],
                weight=1,
                fill=True,
                fill_opacity=0.3,
            ).add_to(m)


    # Display the map in Streamlit
    st_folium(m, width=700, height=500)
